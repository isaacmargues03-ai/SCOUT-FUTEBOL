{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/actions.ts"],"sourcesContent":["\"use server\";\n\nimport axios from 'axios';\nimport type { Dependency, OutdatedResult, VulnerabilityResult, LicenseResult, ScanResult } from '@/lib/types';\n\ntype SimpleDep = Pick<Dependency, 'name' | 'version'>;\n\nconst COMPATIBLE_LICENSES = ['MIT', 'ISC', 'Apache-2.0', 'BSD-3-Clause', 'BSD-2-Clause', 'Unlicense', '0BSD'];\n\nasync function fetchNpmData(packageName: string, version?: string): Promise<any> {\n  const url = version \n    ? `https://registry.npmjs.org/${packageName}/${version}`\n    : `https://registry.npmjs.org/${packageName}`;\n  try {\n    const response = await axios.get(url, { timeout: 5000 });\n    return response.data;\n  } catch (error) {\n    if (axios.isAxiosError(error) && error.response?.status === 404) {\n      console.warn(`Package not found: ${packageName}`);\n    } else {\n      console.error(`Failed to fetch data for ${packageName}:`, error);\n    }\n    return null;\n  }\n}\n\nexport async function checkOutdated(deps: SimpleDep[]): Promise<ScanResult<OutdatedResult>> {\n  const results = await Promise.allSettled(\n    deps.map(async (dep) => {\n      const data = await fetchNpmData(dep.name);\n      if (!data) return { name: dep.name, latestVersion: 'Error', isOutdated: false };\n\n      const latestVersion = data['dist-tags']?.latest;\n      return {\n        name: dep.name,\n        latestVersion: latestVersion || dep.version,\n        isOutdated: latestVersion && latestVersion !== dep.version,\n      };\n    })\n  );\n\n  return results\n    .filter((r) => r.status === 'fulfilled')\n    .map((r) => (r as PromiseFulfilledResult<OutdatedResult>).value);\n}\n\nexport async function scanVulnerabilities(deps: SimpleDep[]): Promise<ScanResult<VulnerabilityResult>> {\n  const results = await Promise.allSettled(\n    deps.map(async (dep) => {\n      const data = await fetchNpmData(dep.name, dep.version);\n      let isVulnerable = false;\n      let vulnerabilityDetails;\n\n      if (data?.deprecated) {\n        isVulnerable = true;\n        vulnerabilityDetails = `Deprecated: ${data.deprecated}`;\n      } else if (Math.random() < 0.05) { // Simulate a random vulnerability for demo purposes\n        isVulnerable = true;\n        vulnerabilityDetails = 'A critical simulated vulnerability was found.';\n      }\n      \n      return {\n        name: dep.name,\n        isVulnerable,\n        vulnerabilityDetails,\n      };\n    })\n  );\n\n  return results\n    .filter((r) => r.status === 'fulfilled')\n    .map((r) => (r as PromiseFulfilledResult<VulnerabilityResult>).value);\n}\n\nexport async function checkLicenses(deps: SimpleDep[]): Promise<ScanResult<LicenseResult>> {\n  const results = await Promise.allSettled(\n    deps.map(async (dep) => {\n      const data = await fetchNpmData(dep.name, dep.version);\n      const license = data?.license || 'N/A';\n      let licenseIssue;\n\n      if (license !== 'N/A' && !COMPATIBLE_LICENSES.includes(license)) {\n        licenseIssue = `License \"${license}\" may require review.`;\n      }\n      \n      return {\n        name: dep.name,\n        license,\n        licenseIssue,\n      };\n    })\n  );\n\n  return results\n    .filter((r) => r.status === 'fulfilled')\n    .map((r) => (r as PromiseFulfilledResult<LicenseResult>).value);\n}\n"],"names":[],"mappings":";;;;;;;;;AAEA;;;;AAKA,MAAM,sBAAsB;IAAC;IAAO;IAAO;IAAc;IAAgB;IAAgB;IAAa;CAAO;AAE7G,eAAe,aAAa,WAAmB,EAAE,OAAgB;IAC/D,MAAM,MAAM,UACR,CAAC,2BAA2B,EAAE,YAAY,CAAC,EAAE,SAAS,GACtD,CAAC,2BAA2B,EAAE,aAAa;IAC/C,IAAI;QACF,MAAM,WAAW,MAAM,gJAAK,CAAC,GAAG,CAAC,KAAK;YAAE,SAAS;QAAK;QACtD,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,IAAI,gJAAK,CAAC,YAAY,CAAC,UAAU,MAAM,QAAQ,EAAE,WAAW,KAAK;YAC/D,QAAQ,IAAI,CAAC,CAAC,mBAAmB,EAAE,aAAa;QAClD,OAAO;YACL,QAAQ,KAAK,CAAC,CAAC,yBAAyB,EAAE,YAAY,CAAC,CAAC,EAAE;QAC5D;QACA,OAAO;IACT;AACF;AAEO,eAAe,cAAc,IAAiB;IACnD,MAAM,UAAU,MAAM,QAAQ,UAAU,CACtC,KAAK,GAAG,CAAC,OAAO;QACd,MAAM,OAAO,MAAM,aAAa,IAAI,IAAI;QACxC,IAAI,CAAC,MAAM,OAAO;YAAE,MAAM,IAAI,IAAI;YAAE,eAAe;YAAS,YAAY;QAAM;QAE9E,MAAM,gBAAgB,IAAI,CAAC,YAAY,EAAE;QACzC,OAAO;YACL,MAAM,IAAI,IAAI;YACd,eAAe,iBAAiB,IAAI,OAAO;YAC3C,YAAY,iBAAiB,kBAAkB,IAAI,OAAO;QAC5D;IACF;IAGF,OAAO,QACJ,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,aAC3B,GAAG,CAAC,CAAC,IAAM,AAAC,EAA6C,KAAK;AACnE;AAEO,eAAe,oBAAoB,IAAiB;IACzD,MAAM,UAAU,MAAM,QAAQ,UAAU,CACtC,KAAK,GAAG,CAAC,OAAO;QACd,MAAM,OAAO,MAAM,aAAa,IAAI,IAAI,EAAE,IAAI,OAAO;QACrD,IAAI,eAAe;QACnB,IAAI;QAEJ,IAAI,MAAM,YAAY;YACpB,eAAe;YACf,uBAAuB,CAAC,YAAY,EAAE,KAAK,UAAU,EAAE;QACzD,OAAO,IAAI,KAAK,MAAM,KAAK,MAAM;YAC/B,eAAe;YACf,uBAAuB;QACzB;QAEA,OAAO;YACL,MAAM,IAAI,IAAI;YACd;YACA;QACF;IACF;IAGF,OAAO,QACJ,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,aAC3B,GAAG,CAAC,CAAC,IAAM,AAAC,EAAkD,KAAK;AACxE;AAEO,eAAe,cAAc,IAAiB;IACnD,MAAM,UAAU,MAAM,QAAQ,UAAU,CACtC,KAAK,GAAG,CAAC,OAAO;QACd,MAAM,OAAO,MAAM,aAAa,IAAI,IAAI,EAAE,IAAI,OAAO;QACrD,MAAM,UAAU,MAAM,WAAW;QACjC,IAAI;QAEJ,IAAI,YAAY,SAAS,CAAC,oBAAoB,QAAQ,CAAC,UAAU;YAC/D,eAAe,CAAC,SAAS,EAAE,QAAQ,qBAAqB,CAAC;QAC3D;QAEA,OAAO;YACL,MAAM,IAAI,IAAI;YACd;YACA;QACF;IACF;IAGF,OAAO,QACJ,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,aAC3B,GAAG,CAAC,CAAC,IAAM,AAAC,EAA4C,KAAK;AAClE;;;IAtEsB;IAoBA;IA4BA;;AAhDA,+OAAA;AAoBA,+OAAA;AA4BA,+OAAA","debugId":null}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/.next-internal/server/app/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {checkOutdated as '4086238def72e659239a97fe0bbf8287f996cbc1b5'} from 'ACTIONS_MODULE0'\nexport {scanVulnerabilities as '40ce06e2d46606ff3581a08ae2141ed83471429ab0'} from 'ACTIONS_MODULE0'\nexport {checkLicenses as '4016b81c7fa94a983919a2652001bb2901a3d08f81'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 217, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/dependency-table.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const DependencyTable = registerClientReference(\n    function() { throw new Error(\"Attempted to call DependencyTable() from the server but DependencyTable is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/dependency-table.tsx <module evaluation>\",\n    \"DependencyTable\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,kBAAkB,IAAA,wQAAuB,EAClD;IAAa,MAAM,IAAI,MAAM;AAA8O,GAC3Q,qEACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 231, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/dependency-table.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const DependencyTable = registerClientReference(\n    function() { throw new Error(\"Attempted to call DependencyTable() from the server but DependencyTable is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/dependency-table.tsx\",\n    \"DependencyTable\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,kBAAkB,IAAA,wQAAuB,EAClD;IAAa,MAAM,IAAI,MAAM;AAA8O,GAC3Q,iDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 245, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 253, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/page.tsx"],"sourcesContent":["import fs from 'fs/promises';\nimport path from 'path';\nimport { DependencyTable } from '@/components/dependency-table';\nimport type { Dependency } from '@/lib/types';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\n\n// This is a POC and reads the dev server's package.json.\n// In a real-world scenario, you might upload a package.json or connect to a repo.\nasync function getDependencies(): Promise<Dependency[]> {\n  try {\n    const packageJsonPath = path.join(process.cwd(), 'package.json');\n    const packageJsonContent = await fs.readFile(packageJsonPath, 'utf-8');\n    const packageJson = JSON.parse(packageJsonContent);\n\n    const dependencies = packageJson.dependencies ? Object.entries(packageJson.dependencies).map(([name, version]) => ({\n      name,\n      version: (version as string).replace(/[\\^~]/g, ''),\n      type: 'dependency' as const,\n      status: 'unscanned' as const,\n    })) : [];\n\n    const devDependencies = packageJson.devDependencies ? Object.entries(packageJson.devDependencies).map(([name, version]) => ({\n      name,\n      version: (version as string).replace(/[\\^~]/g, ''),\n      type: 'devDependency' as const,\n      status: 'unscanned' as const,\n    })) : [];\n\n    return [...dependencies, ...devDependencies].sort((a, b) => a.name.localeCompare(b.name));\n  } catch (error) {\n    console.error(\"Failed to read or parse package.json:\", error);\n    return [];\n  }\n}\n\nexport default async function Home() {\n  const allDependencies = await getDependencies();\n\n  return (\n    <div className=\"min-h-screen w-full bg-background font-body\">\n      <div className=\"container mx-auto p-4 sm:p-6 lg:p-8\">\n        <header className=\"mb-8\">\n          <h1 className=\"text-4xl font-headline font-bold text-primary tracking-tight\">\n            Dependency Tracker\n          </h1>\n          <p className=\"text-lg text-muted-foreground mt-2\">\n            Keep your project's dependencies secure and up-to-date with a single click.\n          </p>\n        </header>\n\n        <DependencyTable initialDependencies={allDependencies} />\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAIA,yDAAyD;AACzD,kFAAkF;AAClF,eAAe;IACb,IAAI;QACF,MAAM,kBAAkB,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;QACjD,MAAM,qBAAqB,MAAM,gIAAE,CAAC,QAAQ,CAAC,iBAAiB;QAC9D,MAAM,cAAc,KAAK,KAAK,CAAC;QAE/B,MAAM,eAAe,YAAY,YAAY,GAAG,OAAO,OAAO,CAAC,YAAY,YAAY,EAAE,GAAG,CAAC,CAAC,CAAC,MAAM,QAAQ,GAAK,CAAC;gBACjH;gBACA,SAAS,AAAC,QAAmB,OAAO,CAAC,UAAU;gBAC/C,MAAM;gBACN,QAAQ;YACV,CAAC,KAAK,EAAE;QAER,MAAM,kBAAkB,YAAY,eAAe,GAAG,OAAO,OAAO,CAAC,YAAY,eAAe,EAAE,GAAG,CAAC,CAAC,CAAC,MAAM,QAAQ,GAAK,CAAC;gBAC1H;gBACA,SAAS,AAAC,QAAmB,OAAO,CAAC,UAAU;gBAC/C,MAAM;gBACN,QAAQ;YACV,CAAC,KAAK,EAAE;QAER,OAAO;eAAI;eAAiB;SAAgB,CAAC,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,IAAI,CAAC,aAAa,CAAC,EAAE,IAAI;IACzF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yCAAyC;QACvD,OAAO,EAAE;IACX;AACF;AAEe,eAAe;IAC5B,MAAM,kBAAkB,MAAM;IAE9B,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAO,WAAU;;sCAChB,8OAAC;4BAAG,WAAU;sCAA+D;;;;;;sCAG7E,8OAAC;4BAAE,WAAU;sCAAqC;;;;;;;;;;;;8BAKpD,8OAAC,4JAAe;oBAAC,qBAAqB;;;;;;;;;;;;;;;;;AAI9C","debugId":null}}]
}